<!DOCTYPE html>
<html lang="es">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
Â  <title>MisSup - Panel</title>
Â  <style>
Â  Â  /* ======= ESTILOS GENERALES ======= */
Â  Â  * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
Â  Â  body { background: #f2f4f8; min-height: 100vh; }

Â  Â  /* ======= PANTALLA LOGIN/REGISTRO ======= */
Â  Â  .login-screen {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: center;
Â  Â  Â  align-items: center;
Â  Â  Â  min-height: 100vh;
Â  Â  Â  background: linear-gradient(135deg, #002147, #0047ab);
Â  Â  }

Â  Â  .login-container {
Â  Â  Â  background: white;
Â  Â  Â  padding: 30px;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 400px;
Â  Â  }

Â  Â  .login-header {
Â  Â  Â  text-align: center;
Â  Â  Â  margin-bottom: 25px;
Â  Â  }

Â  Â  .login-header h1 {
Â  Â  Â  color: #002147;
Â  Â  Â  margin-bottom: 8px;
Â  Â  }

Â  Â  .login-header p {
Â  Â  Â  color: #666;
Â  Â  Â  font-size: 14px;
Â  Â  }

Â  Â  .tabs {
Â  Â  Â  display: flex;
Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  border-bottom: 1px solid #ddd;
Â  Â  }

Â  Â  .tab {
Â  Â  Â  flex: 1;
Â  Â  Â  text-align: center;
Â  Â  Â  padding: 12px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  color: #666;
Â  Â  Â  transition: all 0.3s;
Â  Â  }

Â  Â  .tab.active {
Â  Â  Â  color: #002147;
Â  Â  Â  border-bottom: 2px solid #002147;
Â  Â  }

Â  Â  .form-group {
Â  Â  Â  margin-bottom: 15px;
Â  Â  }

Â  Â  .form-group label {
Â  Â  Â  display: block;
Â  Â  Â  margin-bottom: 5px;
Â  Â  Â  color: #002147;
Â  Â  Â  font-weight: bold;
Â  Â  }

Â  Â  .form-group input {
Â  Â  Â  width: 100%;
Â  Â  Â  padding: 10px;
Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  font-size: 14px;
Â  Â  }

Â  Â  .form-group input:focus {
Â  Â  Â  outline: none;
Â  Â  Â  border-color: #002147;
Â  Â  }

Â  Â  .btn-login {
Â  Â  Â  width: 100%;
Â  Â  Â  background: #002147;
Â  Â  Â  color: white;
Â  Â  Â  padding: 12px;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-size: 16px;
Â  Â  Â  margin-top: 10px;
Â  Â  }

Â  Â  .btn-login:hover {
Â  Â  Â  background: #00152d;
Â  Â  }

Â  Â  .role-info {
Â  Â  Â  background: #e6f2ff;
Â  Â  Â  padding: 12px;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  margin-top: 20px;
Â  Â  Â  font-size: 12px;
Â  Â  Â  color: #002147;
Â  Â  }

Â  Â  .role-info ul {
Â  Â  Â  margin-left: 15px;
Â  Â  Â  margin-top: 5px;
Â  Â  }

Â  Â  /* ======= SIDEBAR ======= */
Â  Â  .sidebar {
Â  Â  Â  position: fixed;
Â  Â  Â  left: 0; top: 0;
Â  Â  Â  width: 240px;
Â  Â  Â  height: 100vh;
Â  Â  Â  background-color: #002147;
Â  Â  Â  color: white;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  z-index: 100;
Â  Â  }

Â  Â  .sidebar-header {
Â  Â  Â  padding: 20px;
Â  Â  Â  border-bottom: 1px solid rgba(255,255,255,0.2);
Â  Â  }

Â  Â  .sidebar-header h2 { margin-bottom: 5px; }
Â  Â  .sidebar-header p { font-size: 13px; opacity: 0.8; }

Â  Â  .sidebar-menu {
Â  Â  Â  list-style: none;
Â  Â  Â  padding: 10px 0;
Â  Â  }

Â  Â  .sidebar-menu li a {
Â  Â  Â  display: block;
Â  Â  Â  padding: 12px 20px;
Â  Â  Â  text-decoration: none;
Â  Â  Â  color: rgba(255,255,255,0.8);
Â  Â  Â  transition: all 0.3s;
Â  Â  }

Â  Â  .sidebar-menu li a:hover,
Â  Â  .sidebar-menu li a.active {
Â  Â  Â  background: rgba(255,255,255,0.1);
Â  Â  Â  color: #fff;
Â  Â  }

Â  Â  .sidebar-footer {
Â  Â  Â  padding: 20px;
Â  Â  Â  text-align: center;
Â  Â  Â  border-top: 1px solid rgba(255,255,255,0.2);
Â  Â  }

Â  Â  .btn-logout {
Â  Â  Â  background: #ff6666;
Â  Â  Â  border: none;
Â  Â  Â  color: white;
Â  Â  Â  padding: 10px 15px;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  cursor: pointer;
Â  Â  }
Â  Â  .btn-logout:hover { background: #e04a4a; }

Â  Â  /* ======= CONTENIDO ======= */
Â  Â  .main-app {
Â  Â  Â  display: none;
Â  Â  }

Â  Â  .main-content {
Â  Â  Â  margin-left: 240px;
Â  Â  Â  padding: 25px;
Â  Â  }

Â  Â  .page-header {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  background: white;
Â  Â  Â  padding: 15px 25px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
Â  Â  }

Â  Â  .user-role {
Â  Â  Â  padding: 5px 10px;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  font-size: 13px;
Â  Â  }

Â  Â  .user-role.admin { background: #ffb366; color: white; }
Â  Â  .user-role.user { background: #99ccff; color: #002147; }

Â  Â  .btn-primary {
Â  Â  Â  background: #002147;
Â  Â  Â  color: white;
Â  Â  Â  padding: 8px 14px;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .btn-primary:hover { background: #00152d; }

Â  Â  /* ======= PRODUCTOS ======= */
Â  Â  .products-grid {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
Â  Â  Â  gap: 20px;
Â  Â  Â  margin-top: 25px;
Â  Â  }

Â  Â  .product-card {
Â  Â  Â  background: white;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
Â  Â  Â  overflow: hidden;
Â  Â  Â  transition: 0.3s;
Â  Â  }

Â  Â  .product-card:hover { transform: translateY(-5px); }
Â  Â  
Â  Â  /* ESTILO CORREGIDO PARA IMAGEN */
Â  Â  .product-image { 
Â  Â  Â  height: 150px; 
Â  Â  Â  background-color: #e6e9ef; /* Usar background-color para el fondo por defecto */
Â  Â  Â  display: flex; 
Â  Â  Â  align-items: center; 
Â  Â  Â  justify-content: center; 
Â  Â  Â  font-size: 50px; 
Â  Â  Â  /* Propiedades clave para la imagen de URL */
Â  Â  Â  background-size: cover; 
Â  Â  Â  background-position: center; 
Â  Â  Â  background-repeat: no-repeat;
Â  Â  }

Â  Â  .product-info { padding: 15px; }
Â  Â  .product-name { font-weight: bold; color: #002147; }
Â  Â  .product-category { font-size: 13px; color: #555; }
Â  Â  .product-price { margin-top: 8px; font-weight: bold; color: #0047ab; }

Â  Â  .btn-cart, .btn-edit, .btn-delete {
Â  Â  Â  margin: 5px 2px;
Â  Â  Â  padding: 4px 8px;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-size: 12px;
Â  Â  }

Â  Â  .btn-cart { color: #007bff; border-color: #007bff; }
Â  Â  .btn-cart:hover { background: #007bff; color: white; }

Â  Â  .btn-edit { color: #002147; border-color: #002147; }
Â  Â  .btn-edit:hover { background: #002147; color: white; }

Â  Â  .btn-delete { color: #ff6666; border-color: #ff6666; }
Â  Â  .btn-delete:hover { background: #ff6666; color: white; }

Â  Â  /* ======= OVERLAY FORMULARIO ======= */
Â  Â  .overlay {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 0; left: 0;
Â  Â  Â  width: 100%; height: 100%;
Â  Â  Â  background: rgba(0,0,0,0.5);
Â  Â  Â  display: none;
Â  Â  Â  justify-content: center;
Â  Â  Â  align-items: center;
Â  Â  Â  z-index: 1000;
Â  Â  }

Â  Â  .form-container {
Â  Â  Â  background: white;
Â  Â  Â  padding: 25px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  width: 90%;
Â  Â  Â  max-width: 500px;
Â  Â  Â  max-height: 90vh;
Â  Â  Â  overflow-y: auto;
Â  Â  }

Â  Â  .form-container h3 {
Â  Â  Â  color: #002147;
Â  Â  Â  margin-bottom: 20px;
Â  Â  }

Â  Â  .form-actions {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 10px;
Â  Â  Â  margin-top: 20px;
Â  Â  }

Â  Â  .btn-cancel {
Â  Â  Â  background: #f0f0f0;
Â  Â  Â  color: #666;
Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  padding: 10px 15px;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .btn-cancel:hover {
Â  Â  Â  background: #e0e0e0;
Â  Â  }

Â  Â  /* ======= CARRITO ======= */
Â  Â  .cart-container {
Â  Â  Â  background: white;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  padding: 20px;
Â  Â  Â  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
Â  Â  Â  margin-top: 20px;
Â  Â  }

Â  Â  .cart-item {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  padding: 15px 0;
Â  Â  Â  border-bottom: 1px solid #eee;
Â  Â  }

Â  Â  .cart-item:last-child {
Â  Â  Â  border-bottom: none;
Â  Â  }

Â  Â  .cart-item-info {
Â  Â  Â  flex-grow: 1;
Â  Â  }

Â  Â  .cart-item-name {
Â  Â  Â  font-weight: bold;
Â  Â  Â  color: #002147;
Â  Â  }

Â  Â  .cart-item-price {
Â  Â  Â  color: #0047ab;
Â  Â  Â  font-weight: bold;
Â  Â  }

Â  Â  .cart-item-actions {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 10px;
Â  Â  }

Â  Â  .cart-total {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  font-size: 18px;
Â  Â  Â  font-weight: bold;
Â  Â  Â  margin-top: 20px;
Â  Â  Â  padding-top: 20px;
Â  Â  Â  border-top: 2px solid #002147;
Â  Â  }

Â  Â  .btn-remove {
Â  Â  Â  background: #ff6666;
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  padding: 5px 10px;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .btn-remove:hover {
Â  Â  Â  background: #e04a4a;
Â  Â  }

Â  Â  .btn-checkout {
Â  Â  Â  background: #28a745;
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  padding: 12px 20px;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-size: 16px;
Â  Â  Â  margin-top: 20px;
Â  Â  Â  width: 100%;
Â  Â  }

Â  Â  .btn-checkout:hover {
Â  Â  Â  background: #218838;
Â  Â  }

Â  Â  .empty-cart {
Â  Â  Â  text-align: center;
Â  Â  Â  padding: 40px 0;
Â  Â  Â  color: #666;
Â  Â  }

Â  Â  /* ======= FORMULARIO DE PAGO ======= */
Â  Â  .payment-form {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: 1fr 1fr;
Â  Â  Â  gap: 15px;
Â  Â  }

Â  Â  .payment-form .form-group {
Â  Â  Â  margin-bottom: 15px;
Â  Â  }

Â  Â  .payment-form .full-width {
Â  Â  Â  grid-column: 1 / -1;
Â  Â  }

Â  Â  .payment-section {
Â  Â  Â  margin-bottom: 25px;
Â  Â  Â  padding-bottom: 15px;
Â  Â  Â  border-bottom: 1px solid #eee;
Â  Â  }

Â  Â  .payment-section h4 {
Â  Â  Â  color: #002147;
Â  Â  Â  margin-bottom: 15px;
Â  Â  }

Â  Â  .payment-methods {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 15px;
Â  Â  Â  margin-bottom: 15px;
Â  Â  }

Â  Â  .payment-method {
Â  Â  Â  flex: 1;
Â  Â  Â  text-align: center;
Â  Â  Â  padding: 10px;
Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: all 0.3s;
Â  Â  }

Â  Â  .payment-method.selected {
Â  Â  Â  border-color: #002147;
Â  Â  Â  background-color: #e6f2ff;
Â  Â  }

Â  Â  .payment-method:hover {
Â  Â  Â  background-color: #f0f0f0;
Â  Â  }

Â  Â  .payment-summary {
Â  Â  Â  background: #f8f9fa;
Â  Â  Â  padding: 15px;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  margin-top: 20px;
Â  Â  }

Â  Â  .payment-summary-item {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  margin-bottom: 10px;
Â  Â  }

Â  Â  .payment-summary-total {
Â  Â  Â  font-weight: bold;
Â  Â  Â  font-size: 18px;
Â  Â  Â  border-top: 1px solid #ddd;
Â  Â  Â  padding-top: 10px;
Â  Â  Â  margin-top: 10px;
Â  Â  }
Â  Â Â 
Â  Â  /* ======= HISTORIAL (Estilo) ======= */
Â  Â  .history-container {
Â  Â  Â  background: white;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  padding: 20px;
Â  Â  Â  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
Â  Â  Â  margin-top: 20px;
Â  Â  }

Â  Â  .history-item {
Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  padding: 15px;
Â  Â  Â  margin-bottom: 15px;
Â  Â  }

Â  Â  .history-header {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  align-items: center;
Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  border-bottom: 1px dotted #ccc;
Â  Â  }

Â  Â  .history-header strong {
Â  Â  Â  color: #002147;
Â  Â  Â  font-size: 16px;
Â  Â  }

Â  Â  .history-details p {
Â  Â  Â  margin: 3px 0;
Â  Â  Â  font-size: 14px;
Â  Â  }

Â  Â  .history-product-list {
Â  Â  Â  list-style: none;
Â  Â  Â  margin-top: 10px;
Â  Â  Â  padding-top: 10px;
Â  Â  Â  border-top: 1px solid #eee;
Â  Â  }

Â  Â  .history-product-list li {
Â  Â  Â  margin-left: 0;
Â  Â  Â  padding: 3px 0;
Â  Â  Â  font-size: 13px;
Â  Â  Â  color: #555;
Â  Â  }
Â  </style>
</head>
<body>
Â  <div class="login-screen" id="loginScreen">
Â  Â  <div class="login-container">
Â  Â  Â  <div class="login-header">
Â  Â  Â  Â  <h1>MisSup</h1>
Â  Â  Â  Â  <p>Inicia sesiÃ³n o regÃ­strate para acceder</p>
Â  Â  Â  </div>

Â  Â  Â  <div class="tabs">
Â  Â  Â  Â  <div class="tab active" id="loginTab">Iniciar SesiÃ³n</div>
Â  Â  Â  Â  <div class="tab" id="registerTab">Registrarse</div>
Â  Â  Â  </div>

Â  Â  Â  <form id="loginForm">
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  <label for="email">Correo electrÃ³nico</label>
Â  Â  Â  Â  Â  <input type="email" id="email" required>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  <label for="password">ContraseÃ±a</label>
Â  Â  Â  Â  Â  <input type="password" id="password" required>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button type="submit" class="btn-login">Iniciar SesiÃ³n</button>
Â  Â  Â  </form>

Â  Â  Â  <form id="registerForm" style="display: none;">
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  <label for="regName">Nombre completo</label>
Â  Â  Â  Â  Â  <input type="text" id="regName" required>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  <label for="regEmail">Correo electrÃ³nico</label>
Â  Â  Â  Â  Â  <input type="email" id="regEmail" required>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  <label for="regPassword">ContraseÃ±a</label>
Â  Â  Â  Â  Â  <input type="password" id="regPassword" required>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  <label for="regConfirmPassword">Confirmar contraseÃ±a</label>
Â  Â  Â  Â  Â  <input type="password" id="regConfirmPassword" required>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <button type="submit" class="btn-login">Registrarse</button>
Â  Â  Â  </form>

Â  Â  Â  <div class="role-info">
Â  Â  Â  Â  <strong>Credenciales de Prueba:</strong>
Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  <li>**Administrador:** admin@tecmilenio.mx / 123</li>
Â  Â  Â  Â  Â  <li>**Usuario Normal:** user@mail.com / 123</li>
Â  Â  Â  Â  Â  <li>Cualquier registro con correo `@tecmilenio.mx` obtiene rol de **Administrador**.</li>
Â  Â  Â  Â  </ul>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  <div class="main-app" id="mainApp">
Â  Â  <aside class="sidebar">
Â  Â  Â  <div>
Â  Â  Â  Â  <div class="sidebar-header">
Â  Â  Â  Â  Â  <h2>MisSup</h2>
Â  Â  Â  Â  Â  <p id="sidebarUser">Usuario</p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <ul class="sidebar-menu">
Â  Â  Â  Â  Â  <li><a href="#" class="active" id="menuCatalogo">CatÃ¡logo</a></li>
Â  Â  Â  Â  Â  <li><a href="#" id="menuCarrito">ğŸ›’ Carrito <span id="cartCount" style="background: #ff6666; color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px; display: inline-block; min-width: 18px; text-align: center;">0</span></a></li>
Â  Â  Â  Â  Â  <li><a href="#" id="menuHistorial">ğŸ§¾ Historial</a></li>
Â  Â  Â  Â  </ul>
Â  Â  Â  </div>

Â  Â  Â  <div class="sidebar-footer">
Â  Â  Â  Â  <button class="btn-logout" id="logoutBtn">Cerrar sesiÃ³n</button>
Â  Â  Â  </div>
Â  Â  </aside>

Â  Â  <main class="main-content">
Â  Â  Â  <div class="page-header">
Â  Â  Â  Â  <h1 id="pageTitle">CatÃ¡logo de Productos</h1>
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <span id="userName">Usuario</span> |
Â  Â  Â  Â  Â  <span class="user-role user" id="userRole">Usuario</span>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div id="adminActions" style="margin-top:20px; display:none;">
Â  Â  Â  Â  <button class="btn-primary" id="btnAgregar">â• Agregar producto</button>
Â  Â  Â  </div>

Â  Â  Â  <div id="contentArea">
Â  Â  Â  Â  <div class="products-grid" id="productosGrid"></div>
Â  Â  Â  </div>
Â  Â  </main>
Â  </div>

Â  <div class="overlay" id="overlay">
Â  Â  <div class="form-container">
Â  Â  Â  <h3 id="formTitle">Agregar Producto</h3>
Â  Â  Â  <input type="hidden" id="productId">
Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  <label for="productName">Nombre del producto</label>
Â  Â  Â  Â  <input type="text" id="productName" required>
Â  Â  Â  </div>
Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  <label for="productCategory">CategorÃ­a</label>
Â  Â  Â  Â  <input type="text" id="productCategory" required>
Â  Â  Â  </div>
Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  <label for="productPrice">Precio</label>
Â  Â  Â  Â  <input type="number" id="productPrice" min="0" step="0.01" required>
Â  Â  Â  </div>
Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  <label for="productImage">URL de imagen (opcional)</label>
Â  Â  Â  Â  <input type="text" id="productImage">
Â  Â  Â  </div>
Â  Â  Â  <div class="form-actions">
Â  Â  Â  Â  <button class="btn-primary" id="btnGuardar">Guardar</button>
Â  Â  Â  Â  <button class="btn-cancel" id="btnCancelar">Cancelar</button>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  <div class="overlay" id="paymentOverlay">
Â  Â  <div class="form-container">
Â  Â  Â  <h3>Finalizar Compra</h3>
Â  Â  Â Â 
Â  Â  Â  <div class="payment-section">
Â  Â  Â  Â  <h4>InformaciÃ³n de EnvÃ­o</h4>
Â  Â  Â  Â  <div class="payment-form">
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="shippingName">Nombre completo</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="shippingName" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="shippingPhone">TelÃ©fono</label>
Â  Â  Â  Â  Â  Â  <input type="tel" id="shippingPhone" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="form-group full-width">
Â  Â  Â  Â  Â  Â  <label for="shippingAddress">DirecciÃ³n</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="shippingAddress" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="shippingCity">Ciudad</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="shippingCity" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="shippingZip">CÃ³digo Postal</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="shippingZip" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â Â 
Â  Â  Â  <div class="payment-section">
Â  Â  Â  Â  <h4>MÃ©todo de Pago</h4>
Â  Â  Â  Â  <div class="payment-methods">
Â  Â  Â  Â  Â  <div class="payment-method" data-method="credit">
Â  Â  Â  Â  Â  Â  ğŸ’³ Tarjeta de CrÃ©dito
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="payment-method" data-method="debit">
Â  Â  Â  Â  Â  Â  ğŸ’³ Tarjeta de DÃ©bito
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="payment-method" data-method="paypal">
Â  Â  Â  Â  Â  Â  ğŸ…¿ PayPal
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="payment-form" id="creditCardForm">
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="cardName">Nombre en la tarjeta</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="cardName" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="cardNumber">NÃºmero de tarjeta</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="cardNumber" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="cardExpiry">Fecha de expiraciÃ³n</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="cardExpiry" placeholder="MM/AA" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="cardCVC">CVC</label>
Â  Â  Â  Â  Â  Â  <input type="text" id="cardCVC" required>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â Â 
Â  Â  Â  <div class="payment-summary">
Â  Â  Â  Â  <h4>Resumen de Compra</h4>
Â  Â  Â  Â  <div id="paymentSummaryItems"></div>
Â  Â  Â  Â  <div class="payment-summary-item payment-summary-total">
Â  Â  Â  Â  Â  <span>Total:</span>
Â  Â  Â  Â  Â  <span id="paymentTotal">$0.00</span>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â Â 
Â  Â  Â  <div class="form-actions">
Â  Â  Â  Â  <button class="btn-primary" id="btnConfirmPayment">Confirmar Pago</button>
Â  Â  Â  Â  <button class="btn-cancel" id="btnCancelPayment">Cancelar</button>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  // ========= DATOS SIMULADOS =========
Â  Â  let usuario = null;
Â  Â  let productos = [
Â  Â  Â  // AgreguÃ© una imagen de ejemplo para que veas cÃ³mo debe funcionar
Â  Â  Â  {id: 1, nombre: "Laptop HP", categoria: "TecnologÃ­a", precio: 18000, imagen: "https://via.placeholder.com/150/0047ab/FFFFFF?text=Laptop"}, 
Â  Â  Â  {id: 2, nombre: "AudÃ­fonos JBL", categoria: "Audio", precio: 1200, imagen: "https://via.placeholder.com/150/ffb366/000000?text=Audifonos"},
Â  Â  Â  {id: 3, nombre: "Cereal Kellogg's", categoria: "Comida", precio: 85, imagen: ""},
Â  Â  Â  {id: 4, nombre: "Camisa Polo", categoria: "Ropa", precio: 350, imagen: ""}
Â  Â  ];
Â  Â Â 
Â  Â  // ğŸ’¡ BASE DE DATOS DE USUARIOS SIMULADA ğŸ’¡
Â  Â  let usuariosDB = [
Â  Â  Â  { nombre: "admin", email: "admin@tecmilenio.mx", password: "123", esAdmin: true },
Â  Â  Â  { nombre: "usuario", email: "user@mail.com", password: "123", esAdmin: false }
Â  Â  ];

Â  Â  let carrito = [];
Â  Â  let historial = [];
Â  Â  let editandoProducto = false;

Â  Â  // ========= ELEMENTOS =========
Â  Â  const loginScreen = document.getElementById("loginScreen");
Â  Â  const mainApp = document.getElementById("mainApp");
Â  Â  const loginForm = document.getElementById("loginForm");
Â  Â  const registerForm = document.getElementById("registerForm");
Â  Â  const loginTab = document.getElementById("loginTab");
Â  Â  const registerTab = document.getElementById("registerTab");
Â  Â  const userName = document.getElementById("userName");
Â  Â  const userRole = document.getElementById("userRole");
Â  Â  const sidebarUser = document.getElementById("sidebarUser");
Â  Â  const productosGrid = document.getElementById("productosGrid");
Â  Â  const adminActions = document.getElementById("adminActions");
Â  Â  const btnAgregar = document.getElementById("btnAgregar");
Â  Â  const overlay = document.getElementById("overlay");
Â  Â  const formTitle = document.getElementById("formTitle");
Â  Â  const productId = document.getElementById("productId");
Â  Â  const productName = document.getElementById("productName");
Â  Â  const productCategory = document.getElementById("productCategory");
Â  Â  const productPrice = document.getElementById("productPrice");
Â  Â  const productImage = document.getElementById("productImage");
Â  Â  const btnGuardar = document.getElementById("btnGuardar");
Â  Â  const btnCancelar = document.getElementById("btnCancelar");
Â  Â  const pageTitle = document.getElementById("pageTitle");
Â  Â  const contentArea = document.getElementById("contentArea");
Â  Â  const cartCount = document.getElementById("cartCount");
Â  Â  const paymentOverlay = document.getElementById("paymentOverlay");
Â  Â  const btnConfirmPayment = document.getElementById("btnConfirmPayment");
Â  Â  const btnCancelPayment = document.getElementById("btnCancelPayment");
Â  Â  const paymentSummaryItems = document.getElementById("paymentSummaryItems");
Â  Â  const paymentTotal = document.getElementById("paymentTotal");
Â  Â  const logoutBtn = document.getElementById("logoutBtn");


Â  Â  // ========= AUTENTICACIÃ“N Y ROLES =========
Â  Â  loginTab.addEventListener('click', () => {
Â  Â  Â  loginTab.classList.add('active');
Â  Â  Â  registerTab.classList.remove('active');
Â  Â  Â  loginForm.style.display = 'block';
Â  Â  Â  registerForm.style.display = 'none';
Â  Â  });

Â  Â  registerTab.addEventListener('click', () => {
Â  Â  Â  registerTab.classList.add('active');
Â  Â  Â  loginTab.classList.remove('active');
Â  Â  Â  registerForm.style.display = 'block';
Â  Â  Â  loginForm.style.display = 'none';
Â  Â  });

Â  Â  // Manejador de Inicio de SesiÃ³n
Â  Â  loginForm.addEventListener('submit', (e) => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  const email = document.getElementById('email').value;
Â  Â  Â  const password = document.getElementById('password').value;
Â  Â  Â Â 
Â  Â  Â  if (email && password) {
Â  Â  Â  Â  iniciarSesion(email, password);
Â  Â  Â  } else {
Â  Â  Â  Â  alert('Por favor, completa todos los campos');
Â  Â  Â  }
Â  Â  });

Â  Â  // Manejador de Registro
Â  Â  registerForm.addEventListener('submit', (e) => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  const name = document.getElementById('regName').value;
Â  Â  Â  const email = document.getElementById('regEmail').value;
Â  Â  Â  const password = document.getElementById('regPassword').value;
Â  Â  Â  const confirmPassword = document.getElementById('regConfirmPassword').value;
Â  Â  Â Â 
Â  Â  Â  if (password !== confirmPassword) {
Â  Â  Â  Â  alert('Las contraseÃ±as no coinciden');
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  if (name && email && password) {
Â  Â  Â  Â  registrarUsuario(name, email, password);
Â  Â  Â  } else {
Â  Â  Â  Â  alert('Por favor, completa todos los campos');
Â  Â  Â  }
Â  Â  });

Â  Â  // LÃ³gica de Inicio de SesiÃ³n
Â  Â  function iniciarSesion(email, password) {
Â  Â  Â  const userFound = usuariosDB.find(u => u.email === email);
Â  Â  Â Â 
Â  Â  Â  if (userFound) {
Â  Â  Â  Â  if (userFound.password === password) { // ValidaciÃ³n de contraseÃ±a simulada
Â  Â  Â  Â  Â  usuario = userFound;
Â  Â  Â  Â  Â  actualizarInterfazUsuario();
Â  Â  Â  Â  Â  loginScreen.style.display = 'none';
Â  Â  Â  Â  Â  mainApp.style.display = 'block';
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  alert('ContraseÃ±a incorrecta');
Â  Â  Â  Â  }
Â  Â  Â  } else {
Â  Â  Â  Â  alert('El correo electrÃ³nico no estÃ¡ registrado.');
Â  Â  Â  }
Â  Â  }

Â  Â  // LÃ³gica de Registro
Â  Â  function registrarUsuario(nombre, email, password) {
Â  Â  Â  const userExists = usuariosDB.find(u => u.email === email);
Â  Â  Â  if (userExists) {
Â  Â  Â  Â  Â  alert('Este correo electrÃ³nico ya estÃ¡ registrado. Por favor, inicia sesiÃ³n.');
Â  Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  // Asignar rol de Administrador si el correo es de Tecmilenio
Â  Â  Â  const esAdmin = email.endsWith('@tecmilenio.mx');
Â  Â  Â Â 
Â  Â  Â  const nuevoUsuario = {
Â  Â  Â  Â  Â  nombre: nombre,
Â  Â  Â  Â  Â  email: email,
Â  Â  Â  Â  Â  password: password,Â 
Â  Â  Â  Â  Â  esAdmin: esAdmin
Â  Â  Â  };
Â  Â  Â Â 
Â  Â  Â  usuariosDB.push(nuevoUsuario);
Â  Â  Â  usuario = nuevoUsuario;
Â  Â  Â Â 
Â  Â  Â  alert(`Registro exitoso. Bienvenido, ${nombre}. Tienes rol de ${esAdmin ? "Administrador" : "Usuario"}.`);
Â  Â  Â Â 
Â  Â  Â  actualizarInterfazUsuario();
Â  Â  Â  loginScreen.style.display = 'none';
Â  Â  Â  mainApp.style.display = 'block';
Â  Â  }


Â  Â  // LÃ³gica para cerrar sesiÃ³n
Â  Â  logoutBtn.addEventListener('click', () => {
Â  Â  Â  Â  usuario = null;
Â  Â  Â  Â  carrito = [];
Â  Â  Â  Â  actualizarContadorCarrito();
Â  Â  Â  Â  loginScreen.style.display = 'flex';
Â  Â  Â  Â  mainApp.style.display = 'none';
Â  Â  Â  Â  // Limpiar el formulario de login y registro
Â  Â  Â  Â  loginForm.reset();
Â  Â  Â  Â  registerForm.reset();
Â  Â  Â  Â  document.getElementById('email').value = '';
Â  Â  Â  Â  document.getElementById('password').value = '';
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Volver a la pestaÃ±a de Iniciar SesiÃ³n por defecto
Â  Â  Â  Â  loginTab.click();
Â  Â  });


Â  Â  function actualizarInterfazUsuario() {
Â  Â  Â  userName.textContent = usuario.nombre;
Â  Â  Â  sidebarUser.textContent = usuario.nombre;
Â  Â  Â  userRole.textContent = usuario.esAdmin ? "Administrador" : "Usuario";
Â  Â  Â  userRole.className = usuario.esAdmin ? "user-role admin" : "user-role user";
Â  Â  Â Â 
Â  Â  Â  if (usuario.esAdmin) {
Â  Â  Â  Â  adminActions.style.display = "block";
Â  Â  Â  } else {
Â  Â  Â  Â  adminActions.style.display = "none";
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  mostrarProductos();
Â  Â  Â  actualizarContadorCarrito();
Â  Â  }

Â  Â  // ========= FUNCIONES DE PRODUCTOS =========
Â  Â  function mostrarProductos() {
Â  Â  Â  // Limpiar contenido antes de mostrar productos
Â  Â  Â  contentArea.innerHTML = '';
Â  Â  Â Â 
Â  Â  Â  const grid = document.createElement("div");
Â  Â  Â  grid.className = "products-grid";

Â  Â  Â  productos.forEach(p => {
Â  Â  Â  Â  const card = document.createElement("div");
Â  Â  Â  Â  card.className = "product-card";
Â  Â  Â  Â  
Â  Â  Â  Â  // ğŸ’¡ CÃ“DIGO CLAVE CORREGIDO ğŸ’¡
Â  Â  Â  Â  // Construye el estilo para la imagen y determina si mostrar o no el emoji
Â  Â  Â  Â  const hasImage = p.imagen && p.imagen.trim() !== "";
Â  Â  Â  Â  const imageStyle = hasImage 
Â  Â  Â  Â  Â  ? `background-image: url('${p.imagen}');` 
Â  Â  Â  Â  Â  : '';
Â  Â  Â  Â  Â  
Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  <div class="product-image" style="${imageStyle}">
Â  Â  Â  Â  Â  Â  ${hasImage ? '' : 'ğŸ›'}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div class="product-info">
Â  Â  Â  Â  Â  Â  <div class="product-name">${p.nombre}</div>
Â  Â  Â  Â  Â  Â  <div class="product-category">${p.categoria}</div>
Â  Â  Â  Â  Â  Â  <div class="product-price">$${p.precio.toFixed(2)}</div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  ${usuario.esAdmin
Â  Â  Â  Â  Â  Â  Â  Â  ? `<button class="btn-edit" onclick="editar(${p.id})">Editar</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <button class="btn-delete" onclick="borrar(${p.id})">Borrar</button>`
Â  Â  Â  Â  Â  Â  Â  Â  : `<button class="btn-cart" onclick="agregarAlCarrito(${p.id})">Agregar al carrito</button>`
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  grid.appendChild(card);
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  contentArea.appendChild(grid);Â 
Â  Â  Â  pageTitle.textContent = "CatÃ¡logo de Productos";
Â  Â  Â Â 
Â  Â  Â  // Mostrar/Ocultar acciones de admin en el catÃ¡logo
Â  Â  Â  if (usuario && usuario.esAdmin) {
Â  Â  Â  Â  Â  adminActions.style.display = "block";
Â  Â  Â  } else {
Â  Â  Â  Â  Â  adminActions.style.display = "none";
Â  Â  Â  }
Â  Â  }

Â  Â  function agregarAlCarrito(id) {
Â  Â  Â  const p = productos.find(x => x.id === id);
Â  Â  Â  carrito.push({...p});Â 
Â  Â  Â  actualizarContadorCarrito();
Â  Â  Â  alert(`${p.nombre} agregado al carrito`);
Â  Â  }

Â  Â  function editar(id) {
Â  Â  Â  const p = productos.find(x => x.id === id);
Â  Â  Â  editandoProducto = true;
Â  Â  Â  formTitle.textContent = "Editar Producto";
Â  Â  Â  productId.value = p.id;
Â  Â  Â  productName.value = p.nombre;
Â  Â  Â  productCategory.value = p.categoria;
Â  Â  Â  productPrice.value = p.precio;
Â  Â  Â  productImage.value = p.imagen || "";
Â  Â  Â  overlay.style.display = "flex";
Â  Â  }

Â  Â  function borrar(id) {
Â  Â  Â  if (confirm("Â¿EstÃ¡s seguro de que quieres eliminar este producto?")) {
Â  Â  Â  Â  productos = productos.filter(x => x.id !== id);
Â  Â  Â  Â  mostrarProductos();
Â  Â  Â  }
Â  Â  }

Â  Â  function actualizarContadorCarrito() {
Â  Â  Â  cartCount.textContent = carrito.length;
Â  Â  }

Â  Â  // ========= GESTIÃ“N DE PRODUCTOS =========
Â  Â  btnAgregar.addEventListener('click', () => {
Â  Â  Â  editandoProducto = false;
Â  Â  Â  formTitle.textContent = "Agregar Producto";
Â  Â  Â  productId.value = "";
Â  Â  Â  productName.value = "";
Â  Â  Â  productCategory.value = "";
Â  Â  Â  productPrice.value = "";
Â  Â  Â  productImage.value = "";
Â  Â  Â  overlay.style.display = "flex";
Â  Â  });

Â  Â  btnGuardar.addEventListener('click', () => {
Â  Â  Â  const id = productId.value;
Â  Â  Â  const nombre = productName.value;
Â  Â  Â  const categoria = productCategory.value;
Â  Â  Â  const precio = parseFloat(productPrice.value);
Â  Â  Â  const imagen = productImage.value.trim(); // <-- Importante: trim() para limpiar espacios

Â  Â  Â  if (!nombre || !categoria || !precio || isNaN(precio) || precio < 0) {
Â  Â  Â  Â  alert("Por favor, completa todos los campos obligatorios con valores vÃ¡lidos.");
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  if (editandoProducto) {
Â  Â  Â  Â  // Editar producto existente
Â  Â  Â  Â  const index = productos.findIndex(p => p.id == id);
Â  Â  Â  Â  if (index !== -1) {
Â  Â  Â  Â  Â  productos[index] = {
Â  Â  Â  Â  Â  Â  id: parseInt(id),
Â  Â  Â  Â  Â  Â  nombre,
Â  Â  Â  Â  Â  Â  categoria,
Â  Â  Â  Â  Â  Â  precio: parseFloat(precio.toFixed(2)),
Â  Â  Â  Â  Â  Â  imagen: imagen // <-- Se guarda la URL
Â  Â  Â  Â  Â  };
Â  Â  Â  Â  }
Â  Â  Â  } else {
Â  Â  Â  Â  // Agregar nuevo producto
Â  Â  Â  Â  const nuevoId = productos.length > 0 ? Math.max(...productos.map(p => p.id)) + 1 : 1;
Â  Â  Â  Â  productos.push({
Â  Â  Â  Â  Â  id: nuevoId,
Â  Â  Â  Â  Â  nombre,
Â  Â  Â  Â  Â  categoria,
Â  Â  Â  Â  Â  precio: parseFloat(precio.toFixed(2)),
Â  Â  Â  Â  Â  imagen: imagen // <-- Se guarda la URL
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  mostrarProductos();
Â  Â  Â  overlay.style.display = "none";
Â  Â  });

Â  Â  btnCancelar.addEventListener('click', () => {
Â  Â  Â  overlay.style.display = "none";
Â  Â  });

Â  Â  // ========= CARRITO =========
Â  Â  function mostrarCarrito() {
Â  Â  Â  pageTitle.textContent = "Carrito de Compras";
Â  Â  Â  adminActions.style.display = "none";Â 
Â  Â  Â  contentArea.innerHTML = '';Â 
Â  Â  Â Â 
Â  Â  Â  if (carrito.length === 0) {
Â  Â  Â  Â  contentArea.innerHTML = `
Â  Â  Â  Â  Â  <div class="cart-container">
Â  Â  Â  Â  Â  Â  <div class="empty-cart">
Â  Â  Â  Â  Â  Â  Â  <h3>Tu carrito estÃ¡ vacÃ­o</h3>
Â  Â  Â  Â  Â  Â  Â  <p>Agrega productos desde el catÃ¡logo</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  let html = `<div class="cart-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 style="color:#002147; margin-bottom:20px;">Productos en tu carrito</h2>`;
Â  Â  Â Â 
Â  Â  Â  let total = 0;
Â  Â  Â  carrito.forEach((item, index) => {
Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  <div class="cart-item">
Â  Â  Â  Â  Â  Â  <div class="cart-item-info">
Â  Â  Â  Â  Â  Â  Â  <div class="cart-item-name">${item.nombre}</div>
Â  Â  Â  Â  Â  Â  Â  <div class="cart-item-price">$${item.precio.toFixed(2)}</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="cart-item-actions">
Â  Â  Â  Â  Â  Â  Â  <button class="btn-remove" onclick="eliminarDelCarrito(${index})">Eliminar</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  total += item.precio;
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  html += `
Â  Â  Â  Â  Â  <div class="cart-total">
Â  Â  Â  Â  Â  Â  <span>Total:</span>
Â  Â  Â  Â  Â  Â  <span>$${total.toFixed(2)}</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <button class="btn-checkout" onclick="mostrarFormularioPago()">Proceder al Pago</button>
Â  Â  Â  Â  </div>
Â  Â  Â  `;
Â  Â  Â Â 
Â  Â  Â  contentArea.innerHTML = html;
Â  Â  }

Â  Â  function eliminarDelCarrito(index) {
Â  Â  Â  carrito.splice(index, 1);
Â  Â  Â  actualizarContadorCarrito();
Â  Â  Â  mostrarCarrito();
Â  Â  }

Â  Â  // ========= FORMULARIO DE PAGO =========
Â  Â  function mostrarFormularioPago() {
Â  Â  Â  // Configurar y manejar la selecciÃ³n de mÃ©todos de pago
Â  Â  Â  document.querySelectorAll('.payment-method').forEach(method => {
Â  Â  Â  Â  method.onclick = function() {Â 
Â  Â  Â  Â  Â  document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
Â  Â  Â  Â  Â  this.classList.add('selected');
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const form = document.getElementById('creditCardForm');
Â  Â  Â  Â  Â  if (this.dataset.method === 'credit' || this.dataset.method === 'debit') {
Â  Â  Â  Â  Â  Â  form.style.display = 'grid';
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  form.style.display = 'none';
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  // Establecer el primer mÃ©todo como seleccionado por defecto
Â  Â  Â  const firstPaymentMethod = document.querySelector('.payment-method');
Â  Â  Â  document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
Â  Â  Â  if (firstPaymentMethod) {
Â  Â  Â  Â  Â  firstPaymentMethod.classList.add('selected');
Â  Â  Â  }
Â  Â  Â  document.getElementById('creditCardForm').style.display = 'grid';

Â  Â  Â Â 
Â  Â  Â  // Actualizar resumen de compra
Â  Â  Â  let summaryHtml = '';
Â  Â  Â  let total = 0;
Â  Â  Â Â 
Â  Â  Â  carrito.forEach(item => {
Â  Â  Â  Â  summaryHtml += `
Â  Â  Â  Â  Â  <div class="payment-summary-item">
Â  Â  Â  Â  Â  Â  <span>${item.nombre}</span>
Â  Â  Â  Â  Â  Â  <span>$${item.precio.toFixed(2)}</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  Â  Â  total += item.precio;
Â  Â  Â  });
Â  Â  Â Â 
Â  Â  Â  paymentSummaryItems.innerHTML = summaryHtml;
Â  Â  Â  paymentTotal.textContent = `$${total.toFixed(2)}`;
Â  Â  Â Â 
Â  Â  Â  // Mostrar el overlay
Â  Â  Â  paymentOverlay.style.display = "flex";
Â  Â  }
Â  Â  
Â  Â  btnCancelPayment.addEventListener('click', () => {
Â  Â  Â  paymentOverlay.style.display = 'none';
Â  Â  });

Â  Â  btnConfirmPayment.addEventListener('click', () => {
Â  Â  Â  // ValidaciÃ³n simple (puedes agregar mÃ¡s validaciÃ³n si es necesario)
Â  Â  Â  if (!document.getElementById('shippingName').value || 
Â  Â  Â  Â  Â  !document.getElementById('shippingAddress').value) {
Â  Â  Â  Â  alert("Por favor, completa la informaciÃ³n de envÃ­o.");
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  // Crear un objeto de historial
Â  Â  Â  const total = carrito.reduce((sum, item) => sum + item.precio, 0);
Â  Â  Â  const compra = {
Â  Â  Â  Â  id: historial.length + 1,
Â  Â  Â  Â  fecha: new Date().toLocaleDateString(),
Â  Â  Â  Â  productos: [...carrito], // Copia de los productos
Â  Â  Â  Â  total: total,
Â  Â  Â  Â  estado: "Completado"
Â  Â  Â  };
Â  Â  Â Â 
Â  Â  Â  historial.unshift(compra); // Agrega al inicio
Â  Â  Â  carrito = []; // VacÃ­a el carrito
Â  Â  Â  actualizarContadorCarrito();
Â  Â  Â  alert("Â¡Compra completada con Ã©xito!");
Â  Â  Â  paymentOverlay.style.display = 'none';
Â  Â  Â  mostrarProductos(); // Volver al catÃ¡logo o mostrar historial
Â  Â  });


Â  Â  // ========= HISTORIAL DE COMPRAS =========
Â  Â  function mostrarHistorial() {
Â  Â  Â  pageTitle.textContent = "Historial de Compras";
Â  Â  Â  adminActions.style.display = "none";
Â  Â  Â  contentArea.innerHTML = '';
Â  Â  Â Â 
Â  Â  Â  let html = `<div class="history-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 style="color:#002147; margin-bottom:20px;">Tus Transacciones</h2>`;
Â  Â  Â Â 
Â  Â  Â  if (historial.length === 0) {
Â  Â  Â  Â  html += `<p style="text-align: center; color: #666; padding: 20px;">AÃºn no tienes compras en tu historial.</p>`;
Â  Â  Â  } else {
Â  Â  Â  Â  historial.forEach(item => {
Â  Â  Â  Â  Â  const productosList = item.productos.map(p => `<li>${p.nombre} ($${p.precio.toFixed(2)})</li>`).join('');
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  <div class="history-item">
Â  Â  Â  Â  Â  Â  Â  <div class="history-header">
Â  Â  Â  Â  Â  Â  Â  Â  <strong>Compra #${item.id}</strong>
Â  Â  Â  Â  Â  Â  Â  Â  <span>Total: $${item.total.toFixed(2)}</span>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="history-details">
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Fecha:</strong> ${item.fecha}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p><strong>Estado:</strong> ${item.estado}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-weight: bold; margin-top: 5px;">Productos:</p>
Â  Â  Â  Â  Â  Â  Â  Â  <ul class="history-product-list">${productosList}</ul>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  });
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  html += `</div>`;
Â  Â  Â  contentArea.innerHTML = html;
Â  Â  }


Â  Â  // ========= MANEJO DE VISTAS (MenÃº) =========
Â  Â  document.getElementById('menuCatalogo').addEventListener('click', (e) => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  document.querySelectorAll('.sidebar-menu a').forEach(a => a.classList.remove('active'));
Â  Â  Â  e.target.classList.add('active');
Â  Â  Â  mostrarProductos();
Â  Â  });

Â  Â  document.getElementById('menuCarrito').addEventListener('click', (e) => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  document.querySelectorAll('.sidebar-menu a').forEach(a => a.classList.remove('active'));
Â  Â  Â  e.target.classList.add('active');
Â  Â  Â  mostrarCarrito();
Â  Â  });

Â  Â  document.getElementById('menuHistorial').addEventListener('click', (e) => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  document.querySelectorAll('.sidebar-menu a').forEach(a => a.classList.remove('active'));
Â  Â  Â  e.target.classList.add('active');
Â  Â  Â  mostrarHistorial();
Â  Â  });

Â  </script>
</body>
</html>
